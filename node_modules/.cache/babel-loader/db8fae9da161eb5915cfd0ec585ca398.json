{"ast":null,"code":"var _jsxFileName = \"/home/carlos/Documents/Praxis/Personal Club/Improved Site - Client/client/src/pages/blockAluno.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport MUIDataTable from 'mui-datatables';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Button from '@material-ui/core/Button';\nimport history from '../util/history';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Switch from '@material-ui/core/Switch';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport PropTypes from 'prop-types';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Navbar from '../components/Navbar';\nconst styles = {\n  dialogTitle: {\n    margin: 15\n  },\n  dialog: {\n    padding: 30\n  },\n  button: {\n    marginBottom: 15,\n    marginTop: 15\n  },\n  close: {\n    padding: 15\n  }\n};\n\nclass blockAluno extends Component {\n  constructor() {\n    super();\n\n    this.getData = () => {\n      let data = [];\n      const config = {\n        headers: {\n          Authorization: localStorage.FBidToken\n        }\n      };\n      axios.get('/listaDeAlunos', config).then(res => {\n        for (let aluno in res.data) {\n          console.log(res.data[aluno]);\n          res.data[aluno].sexo = res.data[aluno].sexo ? 'Masculino' : 'Feminino';\n          res.data[aluno].desativado = res.data[aluno].desativado ? 'Desativado' : 'Ativo';\n          data.push(res.data[aluno]);\n        }\n\n        this.setState({\n          data: data,\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          errors: err.response.data,\n          loading: false\n        });\n      });\n    };\n\n    this.handleToggle = () => {\n      this.setState({\n        open: !this.state.open\n      });\n    };\n\n    this.handleDisable = () => {\n      const config = {\n        headers: {\n          Authorization: localStorage.FBidToken\n        }\n      };\n      const id = {\n        id: this.state.selectedId\n      };\n      axios.post('/blockAluno', id, config).then(res => {\n        let dummy = this.state.data;\n\n        for (let aluno of dummy) {\n          if (aluno.id === id.id) {\n            aluno.desativado = aluno.desativado === 'Ativo' ? 'Desativado' : 'Ativo';\n          }\n        }\n\n        this.setState({\n          selectedActive: !this.state.selectedActive,\n          message: res.data.message,\n          snackOpen: true,\n          data: dummy\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleDelete = () => {\n      const config = {\n        headers: {\n          Authorization: localStorage.FBidToken\n        }\n      };\n      const id = {\n        id: this.state.selectedId\n      };\n      axios.post('/deleteAluno', id, config).then(res => {\n        let dummy = this.state.data.filter(aluno => {\n          return aluno.id !== id.id;\n        });\n        this.setState({\n          open: !this.state.open,\n          data: dummy,\n          message: res.data.message,\n          snackOpen: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        snackOpen: false\n      });\n    };\n\n    this.state = {\n      loading: true,\n      open: false,\n      snackOpen: false,\n      data: [],\n      selectedActive: null,\n      selectedId: null\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  componentWillUnmount() {\n    let emptyData = [];\n    this.setState({\n      data: emptyData\n    });\n  }\n\n  render() {\n    const classes = this.props.classes;\n    const _this$state = this.state,\n          open = _this$state.open,\n          selectedAluno = _this$state.selectedAluno,\n          selectedActive = _this$state.selectedActive,\n          message = _this$state.message,\n          snackOpen = _this$state.snackOpen;\n    const columns = [{\n      name: 'nome',\n      label: 'Nome',\n      options: {\n        filter: true,\n        sort: true\n      }\n    }, {\n      name: 'matricula',\n      label: 'Matricula',\n      options: {\n        filter: true,\n        sort: true\n      }\n    }, {\n      name: 'cpf',\n      label: 'CPF',\n      options: {\n        filter: true,\n        sort: true\n      }\n    }, {\n      name: 'sexo',\n      label: 'Sexo',\n      options: {\n        filter: true,\n        sort: true\n      }\n    }, {\n      name: 'desativado',\n      label: 'Status',\n      options: {\n        filter: true,\n        sort: true\n      }\n    }, {\n      name: 'id',\n      label: 'Id',\n      options: {\n        filter: true,\n        sort: true,\n        display: false\n      }\n    }];\n    const options = {\n      selectableRows: 'none',\n      filter: false,\n      print: false,\n      download: false,\n      viewColumns: false,\n      onRowClick: event => {\n        console.log(event);\n        this.setState({\n          open: !this.state.open,\n          selectedAluno: event[0].split(' ')[0] + ' ' + event[0].split(' ')[event[0].split(' ').length - 1],\n          selectedId: event[5],\n          selectedActive: event[4] === 'Ativo' ? true : false\n        });\n      },\n      textLabels: {\n        body: {\n          noMatch: 'Nenhum aluno encontrado',\n          toolTip: 'Ordenar'\n        },\n        pagination: {\n          next: 'Próxima Página',\n          previous: 'Página Anterior',\n          rowsPerPage: 'Alunos por página:',\n          displayRows: 'de'\n        },\n        toolbar: {\n          search: 'Buscar',\n          downloadCsv: 'Baixar Tabela Excel',\n          print: 'Imprimir',\n          viewColumns: 'Mostrar Colunas',\n          filterTable: 'Filtros'\n        },\n        filter: {\n          all: 'Todos',\n          title: 'FILTROS',\n          reset: 'LIMPAR'\n        },\n        viewColumns: {\n          title: 'Mostrar Colunas',\n          titleAria: 'Mostrar/Esconder Colunas'\n        },\n        selectedRows: {\n          text: 'fileira(s) selecionada(s)',\n          delete: 'Apagar',\n          deleteAria: 'Apagar fileira selecionada'\n        }\n      }\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      buttons: true,\n      link1: '/home',\n      link2: '/',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }), this.state.loading ? React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        height: '80vh',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(CircularProgress, {\n      size: 100,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(MUIDataTable, {\n      title: 'Alunos',\n      data: this.state.data,\n      columns: columns,\n      options: options,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        marginTop: 15\n      },\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => history.push('/home'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \"Voltar\"))), React.createElement(Dialog, {\n      open: open,\n      fullWidth: true,\n      onClose: this.handleToggle,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      className: classes.dialog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      className: classes.dialogTitle,\n      align: \"center\",\n      variant: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, selectedAluno), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      component: \"label\",\n      container: true,\n      justify: \"space-between\",\n      alignItems: \"center\",\n      spacing: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"subtitle1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, \"Ativar/Desativar aluno\")), React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      checked: selectedActive,\n      color: \"primary\",\n      onChange: this.handleDisable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }))), React.createElement(Grid, {\n      component: \"label\",\n      container: true,\n      justify: \"space-between\",\n      alignItems: \"center\",\n      spacing: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"subtitle1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"Esta a\\xE7\\xE3o n\\xE3o pode ser desfeita\")), React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.handleDelete,\n      className: classes.button,\n      color: \"secondary\",\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, \"Apagar\"))))), React.createElement(Snackbar, {\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'left'\n      },\n      open: snackOpen,\n      autoHideDuration: 3000,\n      onClose: this.handleClose,\n      ContentProps: {\n        'aria-describedby': 'message-id'\n      },\n      message: React.createElement(\"span\", {\n        id: \"message-id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, message),\n      action: [React.createElement(IconButton, {\n        key: \"close\",\n        \"aria-label\": \"Close\",\n        color: \"inherit\",\n        className: classes.close,\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, React.createElement(CloseIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }))],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }));\n  }\n\n}\n\nblockAluno.props = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(blockAluno);","map":{"version":3,"sources":["/home/carlos/Documents/Praxis/Personal Club/Improved Site - Client/client/src/pages/blockAluno.js"],"names":["React","Component","axios","MUIDataTable","CircularProgress","Button","history","Dialog","DialogContent","Switch","Typography","Grid","withStyles","PropTypes","Snackbar","IconButton","CloseIcon","Navbar","styles","dialogTitle","margin","dialog","padding","button","marginBottom","marginTop","close","blockAluno","constructor","getData","data","config","headers","Authorization","localStorage","FBidToken","get","then","res","aluno","console","log","sexo","desativado","push","setState","loading","catch","err","errors","response","handleToggle","open","state","handleDisable","id","selectedId","post","dummy","selectedActive","message","snackOpen","handleDelete","filter","handleClose","componentDidMount","componentWillUnmount","emptyData","render","classes","props","selectedAluno","columns","name","label","options","sort","display","selectableRows","print","download","viewColumns","onRowClick","event","split","length","textLabels","body","noMatch","toolTip","pagination","next","previous","rowsPerPage","displayRows","toolbar","search","downloadCsv","filterTable","all","title","reset","titleAria","selectedRows","text","delete","deleteAria","height","justifyContent","alignItems","vertical","horizontal","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport MUIDataTable from 'mui-datatables'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Button from '@material-ui/core/Button'\nimport history from '../util/history'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport Switch from '@material-ui/core/Switch'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport withStyles from '@material-ui/core/styles/withStyles'\nimport PropTypes from 'prop-types'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Navbar from '../components/Navbar'\n\nconst styles = {\n  dialogTitle: {\n    margin: 15\n  },\n  dialog: {\n    padding: 30\n  },\n  button: {\n    marginBottom: 15,\n    marginTop: 15\n  },\n  close: {\n    padding: 15\n  }\n}\n\nclass blockAluno extends Component {\n  constructor() {\n    super()\n    this.state = {\n      loading: true,\n      open: false,\n      snackOpen: false,\n      data: [],\n      selectedActive: null,\n      selectedId: null\n    }\n  }\n\n  getData = () => {\n    let data = []\n    const config = {\n      headers: {\n        Authorization: localStorage.FBidToken\n      }\n    }\n    axios\n      .get('/listaDeAlunos', config)\n      .then(res => {\n        for (let aluno in res.data) {\n          console.log(res.data[aluno])\n          res.data[aluno].sexo = res.data[aluno].sexo ? 'Masculino' : 'Feminino'\n          res.data[aluno].desativado = res.data[aluno].desativado\n            ? 'Desativado'\n            : 'Ativo'\n          data.push(res.data[aluno])\n        }\n        this.setState({\n          data: data,\n          loading: false\n        })\n      })\n      .catch(err => {\n        this.setState({\n          errors: err.response.data,\n          loading: false\n        })\n      })\n  }\n\n  handleToggle = () => {\n    this.setState({\n      open: !this.state.open\n    })\n  }\n\n  handleDisable = () => {\n    const config = {\n      headers: {\n        Authorization: localStorage.FBidToken\n      }\n    }\n\n    const id = {\n      id: this.state.selectedId\n    }\n    axios\n      .post('/blockAluno', id, config)\n      .then(res => {\n        let dummy = this.state.data\n        for (let aluno of dummy) {\n          if (aluno.id === id.id) {\n            aluno.desativado = aluno.desativado === 'Ativo' ? 'Desativado' : 'Ativo'\n          }\n        }\n        this.setState({\n          selectedActive: !this.state.selectedActive,\n          message: res.data.message,\n          snackOpen: true,\n          data: dummy\n        })\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  handleDelete = () => {\n    const config = {\n      headers: {\n        Authorization: localStorage.FBidToken\n      }\n    }\n    const id = {\n      id: this.state.selectedId\n    }\n    axios\n      .post('/deleteAluno', id, config)\n      .then(res => {\n        let dummy = this.state.data.filter(aluno => {\n          return aluno.id !== id.id\n        })\n        this.setState({\n          open: !this.state.open,\n          data: dummy,\n          message: res.data.message,\n          snackOpen: true\n        })\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  componentDidMount() {\n    this.getData()\n  }\n\n  componentWillUnmount() {\n    let emptyData = []\n    this.setState({\n      data: emptyData\n    })\n  }\n\n  handleClose = () => {\n    this.setState({\n      snackOpen: false\n    })\n  }\n\n  render() {\n    const { classes } = this.props\n    const {\n      open,\n      selectedAluno,\n      selectedActive,\n      message,\n      snackOpen\n    } = this.state\n    const columns = [\n      {\n        name: 'nome',\n        label: 'Nome',\n        options: {\n          filter: true,\n          sort: true\n        }\n      },\n      {\n        name: 'matricula',\n        label: 'Matricula',\n        options: {\n          filter: true,\n          sort: true\n        }\n      },\n      {\n        name: 'cpf',\n        label: 'CPF',\n        options: {\n          filter: true,\n          sort: true\n        }\n      },\n      {\n        name: 'sexo',\n        label: 'Sexo',\n        options: {\n          filter: true,\n          sort: true\n        }\n      },\n      {\n        name: 'desativado',\n        label: 'Status',\n        options: {\n          filter: true,\n          sort: true\n        }\n      },\n      {\n        name: 'id',\n        label: 'Id',\n        options: {\n          filter: true,\n          sort: true,\n          display: false\n        }\n      }\n    ]\n    const options = {\n      selectableRows: 'none',\n      filter: false,\n      print: false,\n      download: false,\n      viewColumns: false,\n      onRowClick: event => {\n        console.log(event)\n        this.setState({\n          open: !this.state.open,\n          selectedAluno:\n            event[0].split(' ')[0] +\n            ' ' +\n            event[0].split(' ')[event[0].split(' ').length - 1],\n          selectedId: event[5],\n          selectedActive: event[4] === 'Ativo' ? true : false\n        })\n      },\n      textLabels: {\n        body: {\n          noMatch: 'Nenhum aluno encontrado',\n          toolTip: 'Ordenar'\n        },\n        pagination: {\n          next: 'Próxima Página',\n          previous: 'Página Anterior',\n          rowsPerPage: 'Alunos por página:',\n          displayRows: 'de'\n        },\n        toolbar: {\n          search: 'Buscar',\n          downloadCsv: 'Baixar Tabela Excel',\n          print: 'Imprimir',\n          viewColumns: 'Mostrar Colunas',\n          filterTable: 'Filtros'\n        },\n        filter: {\n          all: 'Todos',\n          title: 'FILTROS',\n          reset: 'LIMPAR'\n        },\n        viewColumns: {\n          title: 'Mostrar Colunas',\n          titleAria: 'Mostrar/Esconder Colunas'\n        },\n        selectedRows: {\n          text: 'fileira(s) selecionada(s)',\n          delete: 'Apagar',\n          deleteAria: 'Apagar fileira selecionada'\n        }\n      }\n    }\n\n    return (\n      <div>\n        <Navbar buttons={true} link1={'/home'} link2={'/'} />\n        {this.state.loading ? (\n          <div\n            style={{\n              display: 'flex',\n              height: '80vh',\n              justifyContent: 'center',\n              alignItems: 'center'\n            }}\n          >\n            <CircularProgress size={100} />\n          </div>\n        ) : (\n          <div>\n            <MUIDataTable\n              title={'Alunos'}\n              data={this.state.data}\n              columns={columns}\n              options={options}\n            />\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\n              <Button\n                style={{ marginTop: 15 }}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => history.push('/home')}\n              >\n                Voltar\n              </Button>\n            </div>\n          </div>\n        )}\n\n        <Dialog\n          open={open}\n          fullWidth\n          onClose={this.handleToggle}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n          className={classes.dialog}\n        >\n          <Typography\n            className={classes.dialogTitle}\n            align=\"center\"\n            variant=\"h5\"\n          >\n            {selectedAluno}\n          </Typography>\n          <DialogContent>\n            <Grid\n              component=\"label\"\n              container\n              justify=\"space-between\"\n              alignItems=\"center\"\n              spacing={1}\n            >\n              <Grid item>\n                <Typography variant=\"subtitle1\">\n                  Ativar/Desativar aluno\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Switch\n                  checked={selectedActive}\n                  color=\"primary\"\n                  onChange={this.handleDisable}\n                />\n              </Grid>\n            </Grid>\n            <Grid\n              component=\"label\"\n              container\n              justify=\"space-between\"\n              alignItems=\"center\"\n              spacing={1}\n            >\n              <Grid item>\n                <Typography variant=\"subtitle1\">\n                  Esta ação não pode ser desfeita\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Button\n                  onClick={this.handleDelete}\n                  className={classes.button}\n                  color=\"secondary\"\n                  variant=\"contained\"\n                >\n                  Apagar\n                </Button>\n              </Grid>\n            </Grid>\n          </DialogContent>\n        </Dialog>\n        <Snackbar\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'left'\n          }}\n          open={snackOpen}\n          autoHideDuration={3000}\n          onClose={this.handleClose}\n          ContentProps={{\n            'aria-describedby': 'message-id'\n          }}\n          message={<span id=\"message-id\">{message}</span>}\n          action={[\n            <IconButton\n              key=\"close\"\n              aria-label=\"Close\"\n              color=\"inherit\"\n              className={classes.close}\n              onClick={this.handleClose}\n            >\n              <CloseIcon />\n            </IconButton>\n          ]}\n        />\n      </div>\n    )\n  }\n}\n\nblockAluno.props = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles)(blockAluno)\n"]},"metadata":{},"sourceType":"module"}